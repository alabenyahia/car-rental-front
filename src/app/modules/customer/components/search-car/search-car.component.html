<div>

  <form nz-form [formGroup]="searchCarForm" (ngSubmit)="searchCar()" class="post-car-form">
    <h1 nz-typography>Search a car</h1>

    <div>
      <nz-form-item >
        <nz-form-control nzErrorTip="Please select car brand!">
          <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a brand" formControlName="brand">
            @for (brand of listOfBrands; track brand) {
              <nz-option  nzLabel={{brand}} nzValue={{brand}}></nz-option>
            }
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div>
      <nz-form-item>
        <nz-form-control nzErrorTip="Please enter car type!">
          <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a type" formControlName="type">
            @for (type of listOfTypes; track type) {
              <nz-option  nzLabel={{type}} nzValue={{type}}></nz-option>
            }
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div>
      <nz-form-item>
        <nz-form-control nzErrorTip="Please select car transmission!">
          <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a transmission" formControlName="transmission">
            @for (transmission of listOfTransmissions; track transmission) {
              <nz-option  nzLabel={{transmission}} nzValue={{transmission}}></nz-option>
            }
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div>
      <nz-form-item>
        <nz-form-control nzErrorTip="Please select car color!">
          <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a color" formControlName="color">
            @for (color of listOfColors; track color) {
              <nz-option  nzLabel={{color}} nzValue={{color}}></nz-option>
            }
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div>
      <nz-form-item>
        <nz-form-control >
          <button nz-button nzType="primary">Search car</button>
        </nz-form-control>
      </nz-form-item>
    </div>

  </form>
</div>

<div class="cars-container">
  @for (car of cars; track car.id!) {
    <div class="car-container">

      <div class="car-img-container">
        <img [src]="car.processedImage" alt="car image" width="220" height="160" />
      </div>

      <div class="car-info-container">
        <div class="car-name-info-container">
          <div>
            <h2>{{car.brand}} - {{car.name}}</h2>
            <p>{{car.description}}</p>
          </div>
          <div class="delete-btn-container">
            <button nz-button nzType="primary" nzSize="small"  routerLink="/customer/book/{{car.id}}">Book this car</button>
          </div>
        </div>

        <div class="car-details-container">
          <h5>Price: <b>{{car.price}}</b> - Color: <b>{{car.color}}</b> - Transmission: <b>{{car.transmission}}</b>
            - Type: <b>{{car.type}}</b> - Year: <b>{{car.year | date: 'yyyy'}}</b></h5>
        </div>

      </div>
    </div>
  } @empty {
    <h3>No car found...</h3>
  }
</div>

